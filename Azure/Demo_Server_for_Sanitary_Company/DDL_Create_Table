--- A. EMPLOYEE 

create table emp(
	emp_id integer,
	emp_name varchar(100),
	emp_title varchar(100),
	emp_type varchar(100), --- office/delivery
	bday date,
	join_date date,
	nationality varchar(100),
	status varchar(100), --- whether still in employment or resigned 
	special_note text,
	primary key (emp_id)
);


create table resigned_emp(
	emp_id integer,
	date_of_resignation date,
	reason text,
	salary_cleared varchar(100),
	special_note text,
	primary key (emp_id),
	foreign key (emp_id) references emp (emp_id)
);

create table salary_change(
	emp_id integer,
	increment_date date,
	increment_salary integer,
	default_comms decimal,
	special_note text,
);

--- B. INTERIOR DESIGNER AND SUPPLIER 

create table interior_designer (
	int_id integer,
	int_name varchar(100),
	whatsapp integer,
	address varchar(100),
	postal_code integer,
	emp_id integer, --- employee in charge
	special_note text,
	primary key (int_id)
);


create table supplier(
	sup_id int,
	sup_name varchar(100),
	company varchar(100),
	dept varchar(100),
	category varchar(100), --- sanitary/vinyl/lifestyle/marketing
	email varchar(100),
	phone_number varchar(100),
	country varchar(100),
	status varchar(100), 
	special_note text,
	primary key (sup_id)
);

create table supplier_billing(
	invoice_id varchar(100),
	sup_company varchar(100),
	billing_date date,
	billing_amount decimal,
	status varchar(100),
	special_note text,
	primary key (invoice_id)
);


--- C. CUSTOMER AND ORDER 
create table customer(
	cus_id integer,
	cus_name varchar(100),
	int_id integer,
	whatsapp integer,
	address_house_no varchar(100),
	address_street varchar(100),
	address_postal_code integer,
	last_visit date,
	special_note text,
	primary key (cus_id),
	constraint FK_Customer foreign key (int_id) 
	references interior_designer (int_id) on update cascade
);

create table quotation (
	cus_id integer,
	quotation_number varchar (100),
	quotation_date date,
	status varchar (100), --- either pending or confirmed
	special_note text,
	primary key (cus_id, quotation_number),
	foreign key (cus_id) references customer (cus_id)
);

create table confirmed_order(
	order_id integer,
	quotation_number varchar(100),
	emp_id integer,
	cus_id integer,
	int_id integer,
	comms decimal,
	date_of_purchase date,
	amount_purchase decimal,
	payment_method varchar(100),
	payment_cleared varchar(100), --- yes/half/pending
	special_note text,
	primary key (order_id),
	foreign key (emp_id) references emp (emp_id),
	foreign key (int_id) references interior_designer (int_id),
	foreign key (cus_id, quotation_number) references quotation (cus_id, quotation_number)
);


create table product_sku(
	sku varchar(100),
	item_name text,
	description text,
	price decimal,
	brand varchar(100),
	color varchar(100),
	status varchar(100),
	stock_quantity integer,
	pre_order_arrival_date date,
	special_note text,
	primary key (sku)
);

create table ordered_items (
	order_id integer,
	sku varchar(100),
	quantity integer,
	price varchar(100),
	date_of_delivery date,
	special_note text,
	foreign key (order_id) references  confirmed_order (order_id) ON DELETE CASCADE,
	foreign key (sku) references product_sku (sku)
);

create table cancelled_order(
	order_id integer,
	date_of_cancellation date,
	amount_purchase integer,
	refund_required varchar(100),
	reason varchar(100),
	special_note text
);
